// Multi-colored horizontal bars of random width // can handle up to 9 colors with current keyboard UIpackage{		import com.davidbliss.eb.Canvas;		import flash.display.Sprite;	import flash.display.Stage;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.events.Event;	import flash.events.KeyboardEvent;		public class BarsH extends Sprite	{		private var canvas:Canvas;		private var bars:Array;		public function BarsH()		{				stage.align = StageAlign.TOP_LEFT;			stage.scaleMode = StageScaleMode.NO_SCALE;						// draw square to test stage 			var sq:Sprite = new Sprite();			sq.graphics.beginFill( 0xdddddd , 1 );			sq.graphics.drawRect(0,0,stage.stageWidth, stage.stageHeight);			addChild(sq);						// create canvas			canvas = new Canvas(true);			canvas.x=canvas.y=5;			addChild(canvas);						canvas.penUp(false);						// randomly pick heights for bars up to 600 height			var totalHeight:Number = 700;			var maxBarHeight:Number= 13;			var minBarHeight:Number= 1;			var numberOfPens:Number = 6;						bars= new Array();			var bar = new Object();			while (totalHeight > maxBarHeight) {				var h = Math.round(minBarHeight+(Math.random()*(maxBarHeight-minBarHeight)));				totalHeight -= h;				bar = new Object();				bar.y = totalHeight;				bar.height = h;				bar.pen = Math.round(1+(Math.random()*(numberOfPens-1)));				bars.push(bar);			}			bar = new Object();			bar.y = 0;			bar.height = totalHeight;			bar.pen = Math.round(1+(Math.random()*(numberOfPens-1)));			bars.push(bar);						stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeystroke);		}				private function checkKeystroke(event:KeyboardEvent):void{			// draw every bar of each color (to minimize pen changes)			/*			for (var i:Number=1; i<=numberOfPens; i++) {				for (var ii:Number=0; ii<bars.length; ii++) {					if (bars[ii].pen == i) {						canvas.drawFilledRect(0, bars[ii].y, 2000, bars[ii].height);					}				}			}			*/			trace (event.charCode-48)			var i:Number = event.charCode-48			canvas.setPen(i-1);			for (var ii:Number=0; ii<bars.length; ii++) {				if (bars[ii].pen == i) {					canvas.drawFilledRect(0, bars[ii].y, 2000, bars[ii].height);				}			}		}	}}